<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width; initial-scale=1.0">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>k2nr.me</title>

    <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml">
    <link href="/favicon.png" rel="icon" type="image/png">
    <link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script>
    <script src="/javascripts/modernizr-2.0.js"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-26982762-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body class="blog blog_index">
  <header>
    <hgroup>
      <a href="/"><h1 class="title">K2NR.ME</h1></a>
    </hgroup>
  </header>
  <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  <a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja">Tweet</a>
    <p>Page 1 of 3</p>

  

  <div class="blog-summary">
    <div>
      <span>Dec 22, 2014</span>
    </div>
    <h1><a href="/blog/2014/12/22/emacs-magit.html">magitを使い始めて、evilといい感じに組み合わせた話</a></h1>
    <p>この記事は<a href="http://qiita.com/advent-calendar/2014/emacs">Emacs Advent Calendar</a>の22日目です。</p>

<p>若干今更感のある話ですが、最近<a href="http://magit.github.io">Magit</a>を使い始めました。
ところで僕はevilを使っていて、evilとmagitを同時に使うとデフォルトだとかなり微妙な感じになるのでevilとmagitを一緒に使ってもいい感じになるようにいい感じにカスタマイズしたので紹介します。</p>

<h2 id="一応、magitとは">一応、Magitとは</h2>

<p>emacs上で動作するgitクライアントです。普段gitを使ってするような操作は多分大体magitで実現できます。</p>

<h2 id="magitの設定">magit...</h2>
  </div>
  <div class="blog-summary">
    <div>
      <span>Dec 14, 2014</span>
    </div>
    <h1><a href="/blog/2014/12/14/transducers-and-async.html">transducersとcore.async</a></h1>
    <p>これは<a href="http://qiita.com/advent-calendar/2014/clojure">Clojure Advent Calendar</a>の14日目です。</p>

<p>Transducders自体に関しての説明はRich本人の説明が素晴らしいし、僕も以前ブログで言及したので省略します。ついでに<code>core.async</code>も基本的な使い方は理解している前提で記事を書きます。</p>

<ul>
<li><a href="http://blog.cognitect.com/blog/2014/8/6/transducers-are-coming">TRANSDUCERS ARE COMING</a></li>
<li><a href="https://www.youtube.com/watch?v=6mTbuzafcII">“Transducers” by Rich Hickey</a></li>
<li><a href="https://www.youtube.com/watch?v=4KqUvG8HPYo&amp;amp;list=PLZdCLR02grLoc322bYirANEso3mmzvCiI&amp;amp;index=8">Rich Hickey - Inside Transducers</a></li>
<li><a href="http://k2nr.me/blog/2014/08/10/transducers.html">Clojure1.7のtransducersとは...</a></li>
</ul>
  </div>
  <div class="blog-summary">
    <div>
      <span>Dec 09, 2014</span>
    </div>
    <h1><a href="/blog/2014/12/09/create-small-image-for-docker.html">最小のdockerイメージを作る</a></h1>
    <p>この記事は<a href="http://qiita.com/advent-calendar/2014/docker">Docker Advent Calendar 2014</a>の9日目です。</p>

<p>書こうと思ってたことが完全にネタかぶりしたので今日はどうでもいい小ネタを書きます。</p>

<p>dockerのイメージをDockerfileで作るにはベースイメージが必要ですよね。例えばgoを使ったWebアプリケーションを作ろうと思ったら<a href="https://registry.hub.docker.com/_/golang/">公式のgolangイメージ</a>を使う人が多いだろうと思います。
公式の安心感もあるし基本的にそれでいいと僕も思うんですが、サイズが大きいんですよね。今手元で<code>docker pull golang...</code></p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Sep 30, 2014</span>
    </div>
    <h1><a href="/blog/2014/09/30/unproductive-editor-config.html">vimとかemacsとかのこだわり設定</a></h1>
    <p>を考えたり書いたり探してる時間でお前はもっと有益なコードを書けたはずだ</p>

  </div>
  <div class="blog-summary">
    <div>
      <span>Sep 18, 2014</span>
    </div>
    <h1><a href="/blog/2014/09/18/dokkaa-the-simplest-docker-cluster-platform-for-microservices.html">dockerによるmicro servicesのためのプラットフォームつくった</a></h1>
    <p>最近がんばって作ってたものがありまして、とりあえず最低限動くようになったので解説と紹介記事です。</p>

<p>なんか流行ってるからタイトルになんとなくmicro servicesとか付けたけど別にmicro serviceを指向しているわけではありません。</p>

<h2 id="dokkaa">Dokkaa</h2>

<p><a href="https://github.com/k2nr/dokkaa">dokkaa</a>です。
docker使ってるからdokkaaなんですが、呼ぶとき紛らわしいのでdokkaaの方はど→かー↑↑なアクセントです。dockerはど↑っかー→ですね。</p>

<p>dokkaaは複数のレポジトリで開発しているのでまと...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Sep 01, 2014</span>
    </div>
    <h1><a href="/blog/2014/09/01/macro.html">マクロ機能が存在すればいいというわけではない</a></h1>
    <p>どうもLisp教信者です。</p>

<p>HaskellにはTemplate Haskellありますし、Scalaにもマクロあるらしいですね。確かElixirにもマクロあるという情報を聞いた気がします。
マクロ、つまり抽象構文木にアクセスする機能を実装している言語ってのはたくさんあるんですが、Lisper的観点から見解を述べます。</p>

<p>プログラミング言語というのはソースコードのコンパイル過程で大体において抽象構文木と呼ばれるデータ構造を中間データとして出力します。
マクロはこの抽象構文木にアクセスして書...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Aug 21, 2014</span>
    </div>
    <h1><a href="/blog/2014/08/21/docker-container-management.html">Dockerにおけるマルチホストでのコンテナ間リンク考察</a></h1>
    <p>最近dockerの事ばかり考えてます。
マルチホストでdockerを運用する際、真っ先にぶちあたる問題はコンテナ間の連携をどのようにして実現するか、あるいは広義にはService Discoveryをいかにして実現するか、ということだ。</p>

<p>いろいろ調べたり作ったりした結果わかったことをまとめておく。</p>

<h2 id="シングルホストの場合">シングルホストの場合</h2>

<p>まずシングルホストの場合についておさらいする。</p>

<p>dockerでコンテナ間のリンクを行う方法はたくさんある。シングルホストであれば一般的なのは<a href="https://docs.docker.com/userguide/dockerlinks/">Linking Containers</a></p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Aug 20, 2014</span>
    </div>
    <h1><a href="/blog/2014/08/20/dokku.html">dokkuのつらいところとつかいどころ</a></h1>
    <p>最近dockerの事ばかり考えてます。タイトルが言いたかっただけなので以下蛇足なのですが本文を書きます。</p>

<p><a href="https://github.com/progrium/dokku">dokku</a>という、dockerによるOSSのherokuライクなPaaS実装があります。ここ数ヶ月くらい主に業務でdokkuを実際に使いまくってたんですが、すごい便利だなと思う反面トラップがそこかしこに仕掛けられてはまりまくってたのでここにまとめます。</p>

<h2 id="dokkuとは">dokkuとは</h2>

<p>githubの「Docker powered mini-Heroku in around 100 lines of...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Aug 16, 2014</span>
    </div>
    <h1><a href="/blog/2014/08/16/nest-and-complexity.html">ネストの深さとコードの複雑度</a></h1>
    <p>この記事は「コードでも書こう」とエディタを起動したものの書くコードがない状態に陥った僕がやり場のない感情を消化するために書いたものであり、多くの人にとっては全くもって読む価値の無い記事である。そもそも僕個人の存在が社会にとっては全くもって価値のない存在であって、そのような存在から生み出される文章に価値がないことは自明である。</p>

<p>さて、本題です。
本題をまとめると「ネストの深さではなく複雑度でコードの良し悪しを判断すべき」という内容。
言いたいことはこれで終わりなので、以降の価値の無い文章を...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Aug 11, 2014</span>
    </div>
    <h1><a href="/blog/2014/08/11/transducers-2.html">clojure1.7のtransducersの中身を見てみる</a></h1>
    <p><a href="http://k2nr.me/blog/2014/08/10/transducers.html">続き</a>。</p>

<p>もう少しtransducersの中身を見ていきます。</p>

<p>まず、前に取り上げた<code>map</code>ですが、実際のコードは<a href="https://github.com/clojure/clojure/blob/2a09172e0c3285ccdf79d1dc4d399d190678b670/src/clj/clojure/core.clj#L2554">こうなってます</a>。
(transducerの部分のみ抜粋)</p>
<pre class="highlight clojure"><code><span class="w">  </span><span class="p">([</span><span class="n">f</span><span class="p">]</span><span class="w">
    </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">f1</span><span class="p">]</span><span class="w">
      </span><span class="p">(</span><span class="k">fn</span><span class="w">
        </span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="nf">f1</span><span class="p">))</span><span class="w">
        </span><span class="p">([</span><span class="n">result</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">f1</span><span class="w"> </span><span class="n">result</span><span class="p">))</span><span class="w">
        </span><span class="p">([</span><span class="n">result</span><span class="w"> </span><span class="n">input</span><span class="p">]</span><span class="w">
           </span><span class="p">(</span><span class="nf">f1</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">(</span><span class="nf">f</span><span class="w"> </span><span class="n">input</span><span class="p">)))</span><span class="w">
        </span><span class="p">([</span><span class="n">result</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">&amp;</span></code></pre>
  </div>
  <div class="blog-summary">
    <div>
      <span>Aug 10, 2014</span>
    </div>
    <h1><a href="/blog/2014/08/10/transducers.html">Clojure1.7のtransducersとはなにか</a></h1>
    <p>Rich Hickey様から以下のような発信がなされました。
Clojure1.7にtransducersというものが追加されるよ、という話です。</p>

<p><a href="http://blog.cognitect.com/blog/2014/8/6/transducers-are-coming">Transducers are Coming — Cognitect Blog</a></p>

<p>どんなものかというと、従来の<code>core</code>のシーケンスを扱う関数群に新しい機能が追加されていてたとえば</p>
<pre class="highlight plaintext"><code>(map inc)
</code></pre>

<p>これがmapping transducerというtransducerを返します。
このtransducerを使って</p>
<pre class="highlight clojure"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">xform</span><span class="w"> </span><span class="p">(</span></code></pre>
  </div>
  <div class="blog-summary">
    <div>
      <span>Jul 25, 2014</span>
    </div>
    <h1><a href="/blog/2014/07/25/vim-or-ide.html">vimを使うかIDEを使うか</a></h1>
    <ul>
<li>あらゆる言語・環境で自分の愛するエディタもしくはIDEを使うのか</li>
<li>言語・環境ごとに使用するエディタ・IDEを使い分けるのか</li>
</ul>

<p>という話をする。</p>

<p>個人的見解としては、言語、あるいは使用するフレームワーク等によって最適なエディタ・IDEは異なるという持論。したがっていかにvimが好きでもJavaやScalaを書く場合はいんてりじぇーのようなIDEを用いた方がよい。</p>

<p>実際javaをvimでとか無理ゲーでしょ。</p>

<p>ただ、一般的なプログラマは自分の好きなエディタを自分好みに変態カリカリチュー...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>May 23, 2014</span>
    </div>
    <h1><a href="/blog/2014/05/23/docker-api-client-for-clojure.html">Clojure用のDocker Remote APIライブラリをリリースした</a></h1>
    <p>実用的な言語の話をします。</p>

<p>Dockerには<a href="http://docs.docker.io/reference/api/docker_remote_api_v1.11">Remote API</a>という機能があって、Dockerの機能をREST形式のAPIで使えるものです。</p>

<p>OSSでdockerのホスティングサービスつくろうと思ったんですが、clojureのremote APIのライブラリの良さそうなやつがなかったんですね。
なので、Clojure用のDocker Remote APIクライアントライブラリを作ってとりあえず公開しました。</p>

<p><a href="https://github.com/k2nr/docker-clj">ソースコード</a></p>

<p>実はclojureにはRemote APIのライブラリが他...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Apr 28, 2014</span>
    </div>
    <h1><a href="/blog/2014/04/28/thinking-and-coding.html">考える時間とコード書く時間</a></h1>
    <p>他の人がどうかは知らないんだけど、僕はコード書く前に考える時間を長くとることが多い。目を瞑ったり、天井眺めたり、あるいは散歩しながら2時間、3時間延々と考え続ける。どんなアーキテクチャにしようかとか、どの言語で書こうかとか、モジュール名どうしようかとか、いろいろ。</p>

<p>そうしてるとそのうちちょっとずつコーディングするもののイメージが明確になってきて、とりあえずコードを書いてみる。実際に書いてみると、ここはこういう風にしたら上手くいかないなとか、変更に弱そうだな、とか、書く前に考えてただけじゃ...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Mar 18, 2014</span>
    </div>
    <h1><a href="/blog/2014/03/18/partial-and-comp-clojure.html">Clojureのcompが使いづらい</a></h1>
    <p>使いづらいは言い過ぎですが、<code>comp</code>で部分適用した関数を合成したいとき、</p>
<pre class="highlight clojure"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">(</span><span class="nb">comp</span><span class="w">
         </span><span class="p">(</span><span class="nb">partial</span><span class="w"> </span><span class="nb">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
         </span><span class="p">(</span><span class="nb">partial</span><span class="w"> </span><span class="nb">*</span><span class="w"> </span><span class="mi">2</span><span class="p">)))</span><span class="w">
</span><span class="p">(</span><span class="nf">f</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="c1">;=&gt; 6
</span></code></pre>

<p>とかやらないといけないですよね。<code>comp</code>で<code>partial</code>した関数を合成したいケースって結構あると思うんですが、毎回<code>partial</code>書くのだるい。とくにhaskellとか書いた後によく感じます。</p>

<p>ので、こういう<code>comp&gt;</code>内に含まれるやつは部分適用扱いにするマクロ書いて普段...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Mar 15, 2014</span>
    </div>
    <h1><a href="/blog/2014/03/15/concentration.html">集中力とノイズ、あるいはコミュ障の叫び</a></h1>
    <p>プログラマーは集中の邪魔をされるのが嫌いだ。</p>

<p>定説ともいえる話を今更僕が繰り返しても仕方がないのだけれど、プログラムを書くには深い深い集中が長く持続する必要があって、一度それが途切れると同じ集中状態に戻るのに数時間を要する。
だからプログラムと向き合ってる時に話しかけられたり、あるいはチャットの新着が絶え間なく通知されるような状態では高い生産性を発揮することなどでない。当然話しながらプログラミング、チャットしながらプログラミングなんてできない。</p>

<p>これは別にプログラマに限った話ではなくて...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Feb 16, 2014</span>
    </div>
    <h1><a href="/blog/2014/02/16/my-git-workflow.html">git運用フロー10個のルール</a></h1>
    <p>1日に何度もデプロイするようなwebサービスとかをターゲットに考えてます。</p>

<p>基本的にルールが嫌いなのでgit(CIも含め)のワークフローは極力シンプルで問題を起こしづらいものにした方がいいな、といろいろ考えてたら次のようなフローに落ち着きました。</p>

<h2 id="github-flowに従う">
<a href="https://gist.github.com/Gab-km/3705015">GitHub Flow</a>に従う</h2>

<p>大筋、GitHub Flowが個人的な最適解です。シンプルで万人が理解しやすく、問題も起きづらいモデルだと思います。</p>

<h2 id="pushごとにci-jenkinsとかtravisとか-でテストが実行される">pushごとにCI(jenkinsとかtravisとか)でテストが実行される</h2>

<p>大前提です...</p>
  </div>
  <div class="blog-summary">
    <div>
      <span>Feb 16, 2014</span>
    </div>
    <h1><a href="/blog/2014/02/16/octopress-to-middleman.html">octopressからmiddlemanにblogシステム移行した</a></h1>
    <p>octopressは色々不満があって</p>

<ul>
<li>まずoctopressをcloneして…という運用プロセスが気持ち悪い</li>
<li>正式バージョンが2.0から変わらないまま早数年</li>
</ul>

<p>別のstatic site generatorに移行したいなぁとこの数ヶ月思ってたんです。まあそもそもほとんどブログなんて書かないんですが</p>

<p>最近暇な時間が多かったので<a href="http://middlemanapp.com/jp/">middleman</a>を試してみました。</p>

<p>しばらく運用してダメそうならまた移行します。</p>

<p>基本的なフローは</p>

<ol>
<li>
<code>source/blog</code>配下に記事をmarkdown...</li>
</ol>
  </div>
  <div class="blog-summary">
    <div>
      <span>Feb 11, 2014</span>
    </div>
    <h1><a href="/blog/2014/02/11/optimize-clojure-six-length-password-finder.html">Clojureのパスワード問い合わせシステムを高速化する</a></h1>
    <p><a href="http://qiita.com/kawasima/items/ef75f317605ce800a839">パスワード問合せシステムを作る (clojureのreducers)</a></p>

<p>こんな記事が話題になって、その後、徳丸先生がこんな記事を書きました。</p>

<p><a href="http://z.tokumaru.org/2014/02/6php025.html">数字6桁パスワードのハッシュ値の総当たり、PHPなら約0.25秒で終わるよ</a></p>

<p>さすがに遅いだろうと僕も思ったので高速化しました。</p>

<p>まず、もとのclojureのコードを再掲。</p>
<pre class="highlight clojure"><code><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">six-length.core</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.core.reducers</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">r</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="no">:import</span><span class="w"> </span><span class="p">[</span><span class="n">java.security</span></code></pre>
  </div>
  <div class="blog-summary">
    <div>
      <span>Sep 08, 2013</span>
    </div>
    <h1><a href="/blog/2013/09/08/taishoku.html">退職ブログに思うこと</a></h1>
    <p>辞めた話に興味ない。新しい会社に入社したことにフォーカスを当てろ</p>

  </div>

  
    <p><a href="/blog/page/2/">Next page</a></p>
  

  <footer>
  k2nr
</footer>

  </body>
</html>
